<div class="slide flight-photo">
  <style>
    .flight-photo {
      padding: 2.5vh 3vw;
      display: flex;
      flex-direction: column;
      gap: 2vh;
    }

    .flight-photo h2 {
      text-align: center;
      margin-bottom: 1vh;
      background: linear-gradient(135deg, #ff6b6b, #4ecdc4);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      font-size: clamp(24px, 3.5vw, 42px);
    }

    .bottom-hint {
      margin-top: 2vh;
      text-align: center;
    }

    .hint-button {
      background: rgba(255, 255, 255, 0.06);
      color: #f0f6fc;
      border: 1px solid rgba(255, 255, 255, 0.12);
      border-radius: 10px;
      padding: 8px 12px;
      font-weight: 600;
      font-size: 0.9em;
      cursor: pointer;
      transition: all 0.3s;
      opacity: 0.7;
    }

    .hint-button:hover {
      background: rgba(255, 255, 255, 0.12);
      transform: translateY(-2px);
      opacity: 1;
    }

    .hint-content {
      margin-top: 1vh;
      padding: 1vh 1.5vw;
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      color: #f0f6fc;
      line-height: 1.5;
      font-size: 0.85em;
      text-align: left;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
    }

    .hint-content ul {
      margin: 0.5vh 0;
      padding-left: 2em;
    }

    .method-difference {
      background: rgba(255, 87, 34, 0.15);
      border: 2px solid rgba(255, 87, 34, 0.5);
      border-radius: 8px;
      padding: 1.5vh 1.5vw;
      margin-top: 1.5vh;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%,
      100% {
        opacity: 1;
      }
      50% {
        opacity: 0.9;
      }
    }

    .method-difference h4 {
      margin: 0 0 0.5vh 0;
      color: #ff5722;
      font-size: 1.1em;
    }

    .method-difference p {
      margin: 0;
      color: #f0f6fc;
      line-height: 1.4;
    }

    .main-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2vw;
      flex: 1;
    }

    .panel {
      background: rgba(255, 255, 255, 0.03);
      border-radius: 12px;
      padding: 2vh 2vw;
      border: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      flex-direction: column;
      gap: 1.5vh;
      position: relative;
    }

    .panel h3 {
      margin: 0;
      color: #4ecdc4;
      font-size: 1.2em;
    }

    .controls {
      display: flex;
      flex-direction: column;
      gap: 1vh;
    }

    .control-row {
      display: flex;
      align-items: center;
      gap: 1vw;
    }

    .control-row label {
      flex: 0 0 120px;
      font-size: 0.85em;
      color: #f0f6fc;
    }

    .control-row input[type="range"] {
      flex: 1;
      background: rgba(255, 255, 255, 0.1);
      outline: none;
      height: 6px;
      border-radius: 3px;
      cursor: pointer;
    }

    .control-row .value {
      flex: 0 0 80px;
      text-align: right;
      font-family: monospace;
      color: #4ecdc4;
      font-weight: bold;
    }

    .clock-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex: 1;
      gap: 1vw;
      margin: 2vh 0;
    }

    .clock-viz {
      text-align: center;
    }

    .clock-viz svg {
      width: 320px;
      height: 320px;
    }

    .clock-label {
      font-size: 0.85em;
      color: #7d8590;
      margin-top: 0.5vh;
    }

    .vector-viz {
      display: flex;
      justify-content: center;
      align-items: center;
      flex: 1;
      min-height: 300px;
    }

    .vector-viz svg {
      width: 100%;
      height: 100%;
      min-height: 350px;
      max-height: 450px;
    }

    .time-toggle {
      position: absolute;
      top: 2vh;
      right: 2vw;
      background: rgba(255, 255, 255, 0.06);
      color: #f0f6fc;
      border: 1px solid rgba(255, 255, 255, 0.12);
      border-radius: 6px;
      padding: 6px 12px;
      font-size: 0.85em;
      cursor: pointer;
      transition: all 0.2s;
      z-index: 10;
    }

    .time-toggle:hover {
      background: rgba(255, 255, 255, 0.12);
    }

    .flight-span-label {
      text-align: center;
      font-size: 0.9em;
      color: #FFC107;
      font-weight: bold;
      margin-top: -1vh;
    }

    .results {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1vw;
      margin-top: 1vh;
    }

    .result-card {
      background: rgba(255, 255, 255, 0.02);
      border-radius: 8px;
      padding: 1vh 1vw;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .result-card.good {
      border-color: #4caf50;
      background: rgba(76, 175, 80, 0.1);
    }

    .result-card.bad {
      border-color: #ff5722;
      background: rgba(255, 87, 34, 0.1);
    }

    .result-label {
      font-size: 0.8em;
      color: #7d8590;
      margin-bottom: 0.3vh;
    }

    .result-value {
      font-size: 1.1em;
      font-weight: bold;
    }

    .photo-windows {
      position: absolute;
      inset: 0;
      pointer-events: none;
    }

    .explanation {
      background: rgba(78, 205, 196, 0.1);
      border: 1px solid rgba(78, 205, 196, 0.3);
      border-radius: 8px;
      padding: 1vh 1.5vw;
      margin-top: 1vh;
      font-size: 0.9em;
      line-height: 1.4;
    }

    .explanation strong {
      color: #4ecdc4;
    }
  </style>

  <h2>üõ©Ô∏è Aerial Photography: Finding Optimal Light Windows</h2>

  <div class="main-grid">
    <div class="panel">
      <h3>Flight Parameters</h3>

      <div class="controls">
        <div class="control-row">
          <label>Departure (Local):</label>
          <input
            type="range"
            id="departure-time"
            min="0"
            max="23.75"
            step="0.25"
            value="6"
          />
          <span class="value" id="departure-value">06:00</span>
        </div>

        <div class="control-row">
          <label>Flight Duration:</label>
          <input
            type="range"
            id="flight-duration"
            min="1"
            max="12"
            step="0.5"
            value="5"
          />
          <span class="value" id="duration-value">5.0h</span>
        </div>

        <div class="control-row">
          <label>Timezones Crossed:</label>
          <input
            type="range"
            id="timezones"
            min="-12"
            max="12"
            step="1"
            value="3"
          />
          <span class="value" id="timezone-value">+3h</span>
        </div>
      </div>

      <div class="clock-container">
        <div class="clock-viz">
          <svg id="departure-clock" viewBox="0 0 200 200">
            <circle
              cx="100"
              cy="100"
              r="80"
              fill="none"
              stroke="#333"
              stroke-width="2"
            />
            <g class="photo-windows"></g>
            <line
              id="dep-hand"
              x1="100"
              y1="100"
              x2="100"
              y2="30"
              stroke="#2196F3"
              stroke-width="4"
              stroke-linecap="round"
            />
            <circle cx="100" cy="100" r="5" fill="#fff" />
            <text
              x="100"
              y="10"
              text-anchor="middle"
              fill="#7d8590"
              font-size="12"
            >
              00
            </text>
            <text
              x="180"
              y="105"
              text-anchor="middle"
              fill="#7d8590"
              font-size="12"
            >
              06
            </text>
            <text
              x="100"
              y="195"
              text-anchor="middle"
              fill="#7d8590"
              font-size="12"
            >
              12
            </text>
            <text
              x="20"
              y="105"
              text-anchor="middle"
              fill="#7d8590"
              font-size="12"
            >
              18
            </text>
          </svg>
          <div class="clock-label">Departure</div>
        </div>

        <div class="clock-viz">
          <svg id="arrival-clock" viewBox="0 0 200 200">
            <circle
              cx="100"
              cy="100"
              r="80"
              fill="none"
              stroke="#333"
              stroke-width="2"
            />
            <g class="photo-windows"></g>
            <line
              id="arr-hand"
              x1="100"
              y1="100"
              x2="100"
              y2="30"
              stroke="#4CAF50"
              stroke-width="4"
              stroke-linecap="round"
            />
            <circle cx="100" cy="100" r="5" fill="#fff" />
            <text
              x="100"
              y="10"
              text-anchor="middle"
              fill="#7d8590"
              font-size="12"
            >
              00
            </text>
            <text
              x="180"
              y="105"
              text-anchor="middle"
              fill="#7d8590"
              font-size="12"
            >
              06
            </text>
            <text
              x="100"
              y="195"
              text-anchor="middle"
              fill="#7d8590"
              font-size="12"
            >
              12
            </text>
            <text
              x="20"
              y="105"
              text-anchor="middle"
              fill="#7d8590"
              font-size="12"
            >
              18
            </text>
          </svg>
          <div class="clock-label">Arrival (Local)</div>
        </div>
      </div>

      <div class="explanation">
        <strong>Photo Windows:</strong> <span style="color: #FF9800;">Morning golden hour (9-11 AM)</span> and
        <span style="color: #2196F3;">afternoon window (2-4 PM)</span> shown as colored arcs.
        <span id="explanation-text"
          >Drag sliders to see how each method chooses a photo window.</span
        >
      </div>
    </div>

    <div class="panel">
      <h3>Vector Embedding Space</h3>

      <button class="time-toggle" id="time-toggle">
        24h
      </button>

      <div class="vector-viz">
        <svg id="vector-space" viewBox="0 0 400 400">
          <!-- Unit circle -->
          <circle
            cx="200"
            cy="200"
            r="150"
            fill="none"
            stroke="#333"
            stroke-width="1"
            stroke-dasharray="2,2"
            opacity="0.5"
          />

          <!-- Axes -->
          <line
            x1="50"
            y1="200"
            x2="350"
            y2="200"
            stroke="#333"
            stroke-width="1"
            opacity="0.3"
          />
          <line
            x1="200"
            y1="50"
            x2="200"
            y2="350"
            stroke="#333"
            stroke-width="1"
            opacity="0.3"
          />

          <!-- Time labels -->
          <text id="label-north" x="200" y="35" text-anchor="middle" fill="#7d8590" font-size="14">00:00</text>
          <text id="label-east" x="365" y="205" text-anchor="middle" fill="#7d8590" font-size="14">06:00</text>
          <text id="label-south" x="200" y="370" text-anchor="middle" fill="#7d8590" font-size="14">12:00</text>
          <text id="label-west" x="35" y="205" text-anchor="middle" fill="#7d8590" font-size="14">18:00</text>

          <!-- Photo window vectors (morning) -->
          <g id="morning-window">
            <path
              id="morning-arc"
              fill="rgba(255, 152, 0, 0.2)"
              stroke="#FF9800"
              stroke-width="2"
            />
            <text
              id="morning-label"
              x="240"
              y="60"
              text-anchor="middle"
              fill="#FF9800"
              font-size="11"
              font-weight="bold"
            >
              Morning
            </text>
          </g>

          <!-- Photo window vectors (afternoon) -->
          <g id="afternoon-window">
            <path
              id="afternoon-arc"
              fill="rgba(33, 150, 243, 0.2)"
              stroke="#2196F3"
              stroke-width="2"
            />
            <text
              id="afternoon-label"
              x="240"
              y="180"
              text-anchor="middle"
              fill="#2196F3"
              font-size="11"
              font-weight="bold"
            >
              Afternoon
            </text>
          </g>

          <!-- Departure vector -->
          <line
            id="dep-vector"
            x1="200"
            y1="200"
            x2="280"
            y2="200"
            stroke="#2196F3"
            stroke-width="3"
          />
          <circle id="dep-point" cx="280" cy="200" r="5" fill="#2196F3" />
          <text
            id="dep-label"
            x="280"
            y="190"
            text-anchor="middle"
            fill="#2196F3"
            font-size="11"
          >
            Departure
          </text>

          <!-- Arrival vector -->
          <line
            id="arr-vector"
            x1="200"
            y1="200"
            x2="280"
            y2="200"
            stroke="#4CAF50"
            stroke-width="3"
          />
          <circle id="arr-point" cx="280" cy="200" r="5" fill="#4CAF50" />
          <text
            id="arr-label"
            x="280"
            y="190"
            text-anchor="middle"
            fill="#4CAF50"
            font-size="11"
          >
            Arrival
          </text>

          <!-- Distance arc -->
          <path
            id="distance-arc"
            fill="none"
            stroke="#FFC107"
            stroke-width="2"
            stroke-dasharray="3,3"
            opacity="0.8"
          />
        </svg>
      </div>

      <div class="flight-span-label">
        <span id="distance-label"></span>
      </div>

      <div class="results">
        <div class="result-card" id="naive-result">
          <div class="result-label">‚ùå Naive Calculation</div>
          <div class="result-value" id="naive-distance">-</div>
        </div>

        <div class="result-card" id="vector-result">
          <div class="result-label">‚úÖ Vector Distance</div>
          <div class="result-value" id="vector-distance">-</div>
        </div>

        <div class="result-card" id="morning-result">
          <div class="result-label">To Morning Window</div>
          <div class="result-value" id="morning-distance">-</div>
        </div>

        <div class="result-card" id="photo-ready">
          <div class="result-label">Photo Quality</div>
          <div class="result-value" id="photo-quality">-</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Dynamic explanation that appears when methods disagree -->
  <div
    class="method-difference"
    id="method-difference"
    style="display: none"
  >
    <h4>üö® Methods Disagree! Here's Why:</h4>
    <p id="difference-explanation"></p>
  </div>

  <!-- Teaching hint at bottom -->
  <div class="bottom-hint">
    <button class="hint-button" id="hint-button">
      üí° Hint: How to break naive calculation
    </button>
    <div class="hint-content" id="hint-content" style="display: none">
      <p><strong>Try this scenario:</strong></p>
      <ul>
        <li>Set Departure to <strong>17:00-19:00</strong> (evening)</li>
        <li>Set Flight Duration to <strong>3-5 hours</strong></li>
        <li>Set Timezones to <strong>-2 or -3</strong> (westward)</li>
      </ul>
      <p>
        This arrives around <strong>7-11 PM</strong>. The naive method says
        "wait 10+ hours for morning" but vector embedding knows morning is
        actually <strong>closer</strong> going backwards on the clock!
      </p>
    </div>
  </div>
</div>
